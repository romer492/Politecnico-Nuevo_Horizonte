<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sistema de Consulta - Polit√©cnico Cardenal Sancha</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.0/firebase-database-compat.js"></script>
  <style>
    :root {
      --primary: #2c3e50;
      --secondary: #3498db;
      --accent: #e74c3c;
      --light: #ecf0f1;
      --dark: #2c3e50;
      --success: #27ae60;
      --warning: #f39c12;
      --text: #333;
      --text-light: #777;
      --border: #ddd;
      --shadow: 0 2px 10px rgba(0,0,0,0.1);
      --gradient: linear-gradient(135deg, #3498db, #2c3e50);
      --psycho-dark: #1a1a2e;
      --psycho-accent: #e94560;
      --psycho-highlight: #0f3460;
      --psycho-light: #16213e;
      --logo-glow: 0 0 15px rgba(52, 152, 219, 0.5);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
    }
    
    body {
      background: #f8f9fa;
      color: var(--text);
      line-height: 1.6;
    }
    
    .container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 15px;
    }
    
    header {
      background: var(--gradient);
      padding: 25px 15px;
      text-align: center;
      color: white;
      box-shadow: 0 4px 12px rgba(0,0,0,0.15);
      position: relative;
      overflow: hidden;
      min-height: 140px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    
    header::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: linear-gradient(90deg, #e74c3c, #f39c12, #27ae60, #3498db);
      animation: rainbow 3s linear infinite;
    }
    
    @keyframes rainbow {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    
    .header-content {
      display: flex;
      flex-direction: column;
      align-items: center;
      text-align: center;
      position: relative;
      z-index: 2;
      width: 100%;
    }
    
    .header-title {
      margin-bottom: 10px;
    }
    
    header h1 {
      font-size: 2.2rem;
      margin-bottom: 0.5rem;
      font-weight: 800;
      letter-spacing: 0.5px;
      text-shadow: 0 2px 4px rgba(0,0,0,0.3);
      background: linear-gradient(to right, #ffffff, #f0f0f0);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      position: relative;
      padding: 0 20px;
    }
    
    header h1::after {
      content: "";
      position: absolute;
      bottom: -10px;
      left: 50%;
      transform: translateX(-50%);
      width: 80px;
      height: 3px;
      background: white;
      border-radius: 3px;
    }
    
    header p {
      font-size: 1.1rem;
      opacity: 0.95;
      font-weight: 300;
      max-width: 600px;
      margin: 0 auto;
      color: rgba(255, 255, 255, 0.9);
    }

    /* CONTENEDOR PARA LOGO CON TEXTO AL LADO */
    .logo-text-container {
      position: absolute;
      top: 20px;
      left: 20px;
      z-index: 10;
      display: flex;
      align-items: center;
      gap: 15px;
     text-shadow: white;
    }

    /* Logo circular */
    .logo-container {
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      overflow: hidden;
      border: 3px solid rgba(255, 255, 255, 0.9);
      box-shadow: var(--logo-glow);
      background: white;
      transition: all 0.3s ease;
      
      /* Tama√±o para desktop */
      width: 90px;
      height: 90px;
      flex-shrink: 0;
    }

    .logo-container img {
      width: 100%;
      height: 100%;
      object-fit: contain;
      max-width: 100%;
      max-height: 100%;
      border-radius: 50%;
    }

    /* Texto al lado del logo */
    .logo-text {
      display: flex;
      flex-direction: column;
      text-align: left;
    }

    .logo-main-text {
      color: white;
      font-size: 1.8rem;
      font-weight: 800;
      letter-spacing: 1px;
      margin-bottom: 3px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .logo-sub-text {
      color: rgba(255, 255, 255, 0.95);
      font-size: 1rem;
      font-weight: 600;
      letter-spacing: 0.5px;
      text-shadow: 0 1px 3px rgba(0, 0, 0, 0.3);
    }

    .logo-container:hover {
      transform: scale(1.05);
      box-shadow: 0 0 20px rgba(52, 152, 219, 0.7);
    }

    /* CONTENEDOR DE SESI√ìN DE USUARIO (MUESTRA EL ESTADO ACTUAL) */
    .user-session-container {
      position: absolute;
      top: 20px;
      right: 20px;
      z-index: 10;
      background: rgba(255, 255, 255, 0.15);
      backdrop-filter: blur(10px);
      padding: 10px 15px;
      border-radius: 10px;
      border: 1px solid rgba(255, 255, 255, 0.3);
      display: flex;
      align-items: center;
      gap: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 15px;
    }

    .user-info span {
      color: white;
      font-weight: 600;
      font-size: 14px;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    /* BOT√ìN INICIAR SESI√ìN (SOLO SI NO HAY USUARIO) */
    .login-btn-link {
      position: absolute;
      top: 20px;
      right: 20px;
      text-decoration: none;
      z-index: 10;
    }

    .logout-btn {
      background: linear-gradient(145deg, #8b0000, #b22222);
      color: white;
      border: none;
      padding: 8px 16px;
      border-radius: 20px;
      cursor: pointer;
      font-size: 13px;
      font-weight: 600;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .logout-btn:hover {
      background: linear-gradient(145deg, #b22222, #8b0000);
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(178, 34, 34, 0.5);
    }

    /* Sistema de pesta√±as */
    .tabs-container {
      background: white;
      box-shadow: 0 2px 10px rgba(0,0,0,0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .tabs {
      display: flex;
      justify-content: center;
      flex-wrap: wrap;
      gap: 8px;
      max-width: 1200px;
      margin: 0 auto;
      padding: 12px 15px;
    }
    
    /* ESTILO SIC√ìPATA Y FORMAL MEJORADO PARA LOS BOTONES */
    .psycho-button {
      background: linear-gradient(145deg, var(--psycho-dark), var(--psycho-light));
      color: white;
      border: none;
      padding: 14px 20px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
      display: flex;
      align-items: center;
      gap: 8px;
      font-weight: 600;
      position: relative;
      border-radius: 8px;
      letter-spacing: 0.5px;
      text-transform: uppercase;
      overflow: hidden;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.25);
      margin: 2px;
      min-width: auto;
      flex: 1 1 auto;
      justify-content: center;
      text-align: center;
    }
    
    .psycho-button::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
      transition: left 0.7s;
    }
    
    .psycho-button:hover::before {
      left: 100%;
    }
    
    .psycho-button:hover {
      background: linear-gradient(145deg, var(--psycho-highlight), var(--psycho-dark));
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 8px 18px rgba(0, 0, 0, 0.4);
    }
    
    .psycho-button:active {
      transform: translateY(1px) scale(0.98);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
    }
    
    .psycho-button.active {
      color: white;
      border: 2px solid var(--psycho-accent);
      background: linear-gradient(145deg, var(--psycho-highlight), var(--psycho-dark));
      box-shadow: inset 0 2px 8px rgba(0, 0, 0, 0.4), 0 4px 12px rgba(233, 69, 96, 0.3);
      transform: scale(1.01);
    }
    
    .psycho-button.active::after {
      content: "";
      position: absolute;
      bottom: -3px;
      left: 50%;
      transform: translateX(-50%);
      width: 60%;
      height: 2px;
      background: var(--psycho-accent);
      border-radius: 2px;
    }
    
    .psycho-button i {
      transition: transform 0.4s ease;
      font-size: 1em;
    }
    
    .psycho-button:hover i {
      transform: scale(1.2) rotate(5deg);
    }
    
    .psycho-button.active i {
      color: var(--psycho-accent);
      transform: scale(1.05);
    }
    
    /* Botones especiales con efectos psic√≥ticos mejorados */
    .psycho-button.psycho-danger {
      background: linear-gradient(145deg, #8b0000, #b22222);
      box-shadow: 0 4px 12px rgba(139, 0, 0, 0.3);
    }
    
    .psycho-button.psycho-danger:hover {
      background: linear-gradient(145deg, #b22222, #8b0000);
      animation: psycho-pulse 1.5s infinite;
      box-shadow: 0 8px 18px rgba(178, 34, 34, 0.5);
    }
    
    .psycho-button.psycho-success {
      background: linear-gradient(145deg, #006400, #228b22);
      box-shadow: 0 4px 12px rgba(0, 100, 0, 0.3);
    }
    
    .psycho-button.psycho-success:hover {
      background: linear-gradient(145deg, #228b22, #006400);
      box-shadow: 0 8px 18px rgba(34, 139, 34, 0.5);
    }
    
    .psycho-button.psycho-warning {
      background: linear-gradient(145deg, #8B7500, #DAA520);
      box-shadow: 0 4px 12px rgba(218, 165, 32, 0.3);
    }
    
    .psycho-button.psycho-warning:hover {
      background: linear-gradient(145deg, #DAA520, #8B7500);
      box-shadow: 0 8px 18px rgba(218, 165, 32, 0.5);
    }
    
    @keyframes psycho-pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(178, 34, 34, 0.7);
      }
      70% {
        box-shadow: 0 0 0 8px rgba(178, 34, 34, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(178, 34, 34, 0);
      }
    }
    
    .tab-content {
      display: none;
      animation: fadeIn 0.5s;
    }
    
    .tab-content.active {
      display: block;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Secci√≥n de bienvenida personalizada */
    .welcome-user-section {
      background: linear-gradient(135deg, #3498db, #2c3e50);
      color: white;
      padding: 30px;
      border-radius: 15px;
      margin: 20px auto;
      max-width: 1000px;
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.2);
      text-align: center;
    }

    .welcome-user-title {
      font-size: 2rem;
      margin-bottom: 10px;
      font-weight: 700;
    }

    .welcome-user-text {
      font-size: 1.1rem;
      opacity: 0.9;
      margin-bottom: 15px;
    }


    /* Secci√≥n de bienvenida */
    .welcome-section {
      padding: 40px 0;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
      position: relative;
      overflow: hidden;
    }
    
    .welcome-section::before {
      content: "";
      position: absolute;
      top: 0;
      right: 0;
      width: 40%;
      height: 100%;
      background: url('https://images.unsplash.com/photo-1523050854058-8df90110c9f1?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80') no-repeat center center;
      background-size: cover;
      opacity: 0.1;
      z-index: 0;
    }
    
    .welcome-container {
      display: grid;
      grid-template-columns: 1fr;
      gap: 40px;
      align-items: center;
      position: relative;
      z-index: 1;
    }
    
    .welcome-content {
      padding-right: 0;
      text-align: center;
    }
    
    .welcome-badge {
      display: inline-block;
      background: var(--gradient);
      color: white;
      padding: 8px 20px;
      border-radius: 30px;
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 20px;
      box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3);
      animation: badgeFloat 3s ease-in-out infinite;
    }
    
    @keyframes badgeFloat {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-5px);
      }
    }
    
    .welcome-title {
      font-size: 2rem;
      font-weight: 700;
      margin-bottom: 20px;
      color: var(--primary);
      line-height: 1.2;
    }
    
    .welcome-text {
      font-size: 1rem;
      color: var(--text-light);
      margin-bottom: 25px;
      line-height: 1.6;
    }
    
    .btn {
      background-color: var(--secondary);
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 8px;
      cursor: pointer;
      font-size: 15px;
      font-weight: 600;
      transition: all 0.3s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(52, 152, 219, 0.3);
    }
    
    .btn:hover {
      background-color: #2980b9;
      transform: translateY(-3px);
      box-shadow: 0 6px 15px rgba(52, 152, 219, 0.4);
    }
    
    .btn-success {
      background-color: var(--success);
      box-shadow: 0 4px 12px rgba(39, 174, 96, 0.3);
    }
    
    .btn-success:hover {
      background-color: #229954;
      box-shadow: 0 6px 15px rgba(39, 174, 96, 0.4);
    }
    
    /* Tarjetas de caracter√≠sticas */
    .features-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 20px;
    }
    
    .feature-card {
      background: white;
      border-radius: 10px;
      padding: 25px 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s;
      border-left: 4px solid var(--secondary);
      display: flex;
      flex-direction: column;
      height: 100%;
    }
    
    .feature-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .feature-card.checked {
      border-left-color: var(--success);
    }
    
    .feature-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .feature-icon {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: var(--light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      color: var(--secondary);
      margin-right: 12px;
    }
    
    .feature-card.checked .feature-icon {
      background: rgba(39, 174, 96, 0.1);
      color: var(--success);
    }
    
    .feature-title {
      font-size: 1.2rem;
      font-weight: 600;
      color: var(--dark);
    }
    
    .feature-text {
      color: var(--text-light);
      line-height: 1.5;
      flex-grow: 1;
      font-size: 0.95rem;
    }
    
    .feature-badge {
      display: inline-flex;
      align-items: center;
      background: rgba(39, 174, 96, 0.1);
      color: var(--success);
      padding: 5px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 15px;
      align-self: flex-start;
    }
    
    .feature-badge i {
      margin-right: 5px;
    }
    
    /* Secci√≥n de estad√≠sticas */
    .stats-section {
      padding: 50px 0;
      background: white;
    }
    
    .section-title {
      text-align: center;
      font-size: 1.8rem;
      font-weight: 700;
      margin-bottom: 40px;
      color: var(--primary);
      position: relative;
    }
    
    .section-title::after {
      content: "";
      position: absolute;
      bottom: -12px;
      left: 50%;
      transform: translateX(-50%);
      width: 70px;
      height: 4px;
      background: var(--secondary);
      border-radius: 2px;
    }
    
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }
    
    .stat-card {
      text-align: center;
      padding: 30px 15px;
      background: white;
      border-radius: 10px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s;
      border-top: 4px solid var(--secondary);
    }
    
    .stat-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 20px rgba(0,0,0,0.1);
    }
    
    .stat-icon {
      width: 60px;
      height: 60px;
      border-radius: 50%;
      background: var(--light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.5rem;
      color: var(--secondary);
      margin: 0 auto 15px;
    }
    
    .stat-number {
      font-size: 2rem;
      font-weight: 700;
      color: var(--secondary);
      margin-bottom: 8px;
    }
    
    .stat-text {
      font-size: 1rem;
      color: var(--text-light);
    }
    
    /* Secci√≥n Misi√≥n, Visi√≥n, Valores */
    .institutional-section {
      padding: 50px 0;
      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);
    }
    
    .institutional-grid {
      display: grid;
      grid-template-columns: 1fr;
      gap: 25px;
      margin-top: 30px;
    }
    
    .institutional-card {
      background: white;
      border-radius: 10px;
      padding: 30px 20px;
      box-shadow: 0 5px 15px rgba(0,0,0,0.05);
      transition: all 0.3s;
      text-align: center;
      position: relative;
      overflow: hidden;
    }
    
    .institutional-card::before {
      content: "";
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: var(--secondary);
    }
    
    .institutional-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 12px 25px rgba(0,0,0,0.1);
    }
    
    .institutional-icon {
      width: 70px;
      height: 70px;
      border-radius: 50%;
      background: var(--light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.8rem;
      color: var(--secondary);
      margin: 0 auto 20px;
    }
    
    .institutional-title {
      font-size: 1.3rem;
      font-weight: 700;
      margin-bottom: 15px;
      color: var(--primary);
    }
    
    .institutional-text {
      color: var(--text-light);
      line-height: 1.6;
      font-size: 0.95rem;
    }
    
    /* Secci√≥n Historia */
    .history-section {
      padding: 50px 0;
      background: white;
    }
    
    .history-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 40px;
      align-items: center;
    }
    
    .history-text {
      font-size: 1rem;
      color: var(--text-light);
      line-height: 1.6;
    }
    
    .history-text p {
      margin-bottom: 20px;
    }
    
    .history-image {
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }
    
    .history-image img {
      width: 100%;
      height: auto;
      display: block;
    }
    
    /* Footer */
    footer {
      background: var(--gradient);
      color: white;
      padding: 50px 0 15px;
    }
    
    .footer-content {
      display: grid;
      grid-template-columns: 1fr;
      gap: 30px;
      margin-bottom: 30px;
    }
    
    .footer-column h3 {
      font-size: 1.2rem;
      margin-bottom: 20px;
      position: relative;
      padding-bottom: 8px;
    }
    
    .footer-column h3::after {
      content: "";
      position: absolute;
      bottom: 0;
      left: 0;
      width: 35px;
      height: 3px;
      background: white;
    }
    
    .footer-links {
      list-style: none;
    }
    
    .footer-links li {
      margin-bottom: 10px;
    }
    
    .footer-links a {
      color: rgba(255, 255, 255, 0.8);
      text-decoration: none;
      transition: all 0.3s;
      display: flex;
      align-items: center;
      gap: 6px;
      font-size: 0.9rem;
    }
    
    .footer-links a:hover {
      color: white;
      transform: translateX(5px);
    }
    
    .footer-contact p {
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9rem;
    }
    
    .social-links {
      display: flex;
      gap: 12px;
      margin-top: 15px;
    }
    
    .social-links a {
      width: 35px;
      height: 35px;
      border-radius: 50%;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      transition: all 0.3s;
    }
    
    .social-links a:hover {
      background: white;
      color: var(--secondary);
      transform: translateY(-3px);
    }
    
    .footer-bottom {
      text-align: center;
      padding-top: 15px;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      font-size: 0.85rem;
      color: rgba(255, 255, 255, 0.7);
    }
    
    /* Modal de cookies */
    .cookie-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.7);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }
    
    .cookie-modal.active {
      display: flex;
    }
    
    .cookie-content {
      background: white;
      width: 90%;
      max-width: 500px;
      border-radius: 10px;
      padding: 25px 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
      position: relative;
      animation: modalFadeIn 0.5s;
      margin: 20px;
    }
    
    @keyframes modalFadeIn {
      from {
        opacity: 0;
        transform: translateY(-50px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .cookie-header {
      display: flex;
      align-items: center;
      margin-bottom: 15px;
    }
    
    .cookie-icon {
      width: 45px;
      height: 45px;
      border-radius: 50%;
      background: var(--light);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.3rem;
      color: var(--secondary);
      margin-right: 12px;
    }
    
    .cookie-title {
      font-size: 1.3rem;
      font-weight: 700;
      color: var(--primary);
    }
    
    .cookie-text {
      color: var(--text-light);
      margin-bottom: 20px;
      line-height: 1.5;
      font-size: 0.95rem;
    }
    
    .cookie-options {
      margin-bottom: 20px;
    }
    
    .cookie-option {
      display: flex;
      align-items: center;
      margin-bottom: 12px;
    }
    
    .cookie-option input {
      margin-right: 8px;
    }
    
    .cookie-option label {
      font-weight: 600;
      color: var(--dark);
      font-size: 0.95rem;
    }
    
    .cookie-option p {
      color: var(--text-light);
      font-size: 0.85rem;
      margin-top: 5px;
      margin-left: 25px;
    }
    
    .cookie-buttons {
      display: flex;
      gap: 12px;
      justify-content: flex-end;
      flex-direction: column;
    }
    
    .cookie-btn {
      padding: 10px 20px;
      border-radius: 8px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s;
      border: none;
      font-size: 0.95rem;
      width: 100%;
    }
    
    .cookie-btn-accept {
      background: var(--success);
      color: white;
    }
    
    .cookie-btn-accept:hover {
      background: #229954;
    }
    
    .cookie-btn-customize {
      background: var(--light);
      color: var(--text);
    }
    
    .cookie-btn-customize:hover {
      background: #d5dbdb;
    }
    
    /* RESPONSIVE MEDIA QUERIES */
    
    /* Tabletas peque√±as y m√≥viles grandes */
    @media (min-width: 576px) {
      .container {
        padding: 0 20px;
      }
      
      header {
        padding: 25px 20px;
      }
      
      header h1 {
        font-size: 2.2rem;
      }
      
      .section-title {
        font-size: 2rem;
      }
      
      .tabs {
        gap: 10px;
        padding: 15px 20px;
      }
      
      .psycho-button {
        padding: 16px 24px;
        font-size: 15px;
        min-width: 140px;
      }
      
      .logo-text-container {
        left: 25px;
        top: 25px;
      }
      
      .logo-container {
        width: 100px;
        height: 100px;
      }
      
      .logo-main-text {
        font-size: 2rem;
      }
      
      .logo-sub-text {
        font-size: 1.1rem;
      }
      
      .user-session-container {
        top: 25px;
        right: 25px;
      }
      
      .login-btn-link {
        top: 25px;
        right: 25px;
      }
      
      .footer-content {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .cookie-buttons {
        flex-direction: row;
      }
      
      .cookie-btn {
        width: auto;
      }
    }
    
    /* Tabletas */
    @media (min-width: 768px) {
      .container {
        padding: 0 25px;
      }
      
      .header-content {
        flex-direction: row;
        justify-content: center;
      }
      
      .header-title {
        margin-bottom: 0;
        text-align: center;
        flex: 1;
      }
      
      .logo-text-container {
        left: 30px;
        top: 25px;
      }
      
      .logo-container {
        width: 110px;
        height: 110px;
      }
      
      .user-session-container {
        top: 25px;
        right: 30px;
      }
      
      .login-btn-link {
        top: 25px;
        right: 30px;
      }
      
      .welcome-container {
        grid-template-columns: 1fr 1fr;
        gap: 50px;
      }
      
      .welcome-content {
        text-align: left;
        padding-right: 20px;
      }
      
      .features-grid {
        grid-template-columns: repeat(2, 1fr);
      }
      
      .stats-grid {
        grid-template-columns: repeat(4, 1fr);
      }
      
      .institutional-grid {
        grid-template-columns: repeat(3, 1fr);
      }
      
      .history-content {
        grid-template-columns: 1fr 1fr;
      }
      
      .footer-content {
        grid-template-columns: repeat(3, 1fr);
      }
    }
    
    /* Escritorios peque√±os */
    @media (min-width: 992px) {
      .container {
        padding: 0 30px;
      }
      
      header {
        padding: 30px 25px;
        min-height: 160px;
      }
      
      header h1 {
        font-size: 2.8rem;
      }
      
      header p {
        font-size: 1.2rem;
      }
      
      .tabs {
        gap: 15px;
        padding: 15px 25px;
      }
      
      .psycho-button {
        padding: 18px 32px;
        font-size: 16px;
        min-width: 160px;
      }
      
      .logo-text-container {
        left: 40px;
        top: 30px;
      }
      
      .logo-container {
        width: 120px;
        height: 120px;
      }
      
      .logo-main-text {
        font-size: 2.2rem;
      }
      
      .logo-sub-text {
        font-size: 1.2rem;
      }
      
      .user-session-container {
        top: 30px;
        right: 40px;
      }
      
      .login-btn-link {
        top: 30px;
        right: 40px;
      }
      
      .welcome-section {
        padding: 80px 0;
      }
      
      .welcome-title {
        font-size: 2.8rem;
      }
      
      .welcome-text {
        font-size: 1.2rem;
      }
      
      .features-grid {
        gap: 25px;
      }
      
      .feature-card {
        padding: 30px;
      }
      
      .stats-section {
        padding: 80px 0;
      }
      
      .section-title {
        font-size: 2.2rem;
      }
      
      .institutional-section {
        padding: 80px 0;
      }
      
      .history-section {
        padding: 80px 0;
      }
      
      footer {
        padding: 60px 0 20px;
      }
      
      .footer-content {
        grid-template-columns: repeat(4, 1fr);
        gap: 40px;
      }
    }
    
    /* Escritorios grandes */
    @media (min-width: 1200px) {
      .welcome-container {
        gap: 60px;
      }
      
      .logo-text-container {
        left: 50px;
        top: 35px;
      }
      
      .user-session-container {
        top: 35px;
        right: 50px;
      }
      
      .login-btn-link {
        top: 35px;
        right: 50px;
      }
    }
    
    /* Pantallas muy peque√±as (m√≥viles) */
    @media (max-width: 767px) {
      .container {
        padding: 0 15px;
      }
      
      header {
        padding: 90px 15px 20px;
        min-height: 140px;
        text-align: center;
      }
      
      .logo-text-container {
        position: absolute;
        top: 15px;
        left: 15px;
        z-index: 100;
        flex-direction: row;
        gap: 10px;
        align-items: center;
      }
      
      .logo-container {
        width: 70px;
        height: 70px;
        border-width: 2px;
      }
      
      .logo-text {
        display: flex;
        flex-direction: column;
      }
      
      .logo-main-text {
        font-size: 1.4rem;
      }
      
      .logo-sub-text {
        font-size: 0.9rem;
      }
      
      .user-session-container {
        position: absolute;
        top: 15px;
        right: 15px;
        flex-direction: column;
        padding: 8px;
        gap: 8px;
      }
      
      .user-info {
        flex-direction: column;
        gap: 8px;
      }
      
      .user-info span {
        font-size: 12px;
      }
      
      .login-btn-link {
        position: absolute;
        top: 15px;
        right: 15px;
        padding: 8px 16px;
        font-size: 13px;
        z-index: 100;
      }
      
      .header-content {
        flex-direction: column;
      }
      
      header h1 {
        font-size: 1.8rem;
        padding: 0;
      }
      
      header h1::after {
        display: none;
      }
      
      header p {
        font-size: 1rem;
      }
      
      .tabs {
        padding: 10px;
        gap: 5px;
      }
      
      .psycho-button {
        padding: 12px 15px;
        font-size: 12px;
        gap: 5px;
      }
      
      .psycho-button i {
        font-size: 0.9em;
      }
      
      .welcome-title {
        font-size: 1.8rem;
      }
      
      .stats-grid {
        grid-template-columns: 1fr;
      }
    }
    
    @media (max-width: 375px) {
      header {
        padding: 85px 10px 15px;
        min-height: 130px;
      }
      
      .logo-text-container {
        top: 10px;
        left: 10px;
        gap: 8px;
      }
      
      .logo-container {
        width: 60px;
        height: 60px;
      }
      
      .logo-main-text {
        font-size: 1.2rem;
      }
      
      .logo-sub-text {
        font-size: 0.8rem;
      }
      
      .user-session-container {
        top: 10px;
        right: 10px;
        padding: 6px;
      }
      
      .login-btn-link {
        top: 10px;
        right: 10px;
        padding: 6px 12px;
        font-size: 12px;
      }
      
      header h1 {
        font-size: 1.6rem;
      }
      
      header p {
        font-size: 0.9rem;
      }
      
      .psycho-button {
        padding: 10px 12px;
        font-size: 11px;
      }
    }
  </style>
</head>
<body>

  <header>
    <!-- CONTENEDOR PARA LOGO CON TEXTO AL LADO -->
    <div class="logo-text-container">
      <div class="logo-container">
        <!-- AQU√ç EST√Å EL LOGO CON LA RUTA CORRECTA -->
        <img src="C:\Users\Romer Isaac\OneDrive\Desktop\Actualizacion con base de datos\img\logo.jpg" alt="Logo Polit√©cnico">
      </div>
      <div class="logo-text">
        <div class="logo-main-text">Polit√©cnico</div>
        <div class="logo-sub-text">Nuevo Horizontes</div>
      </div>
    </div>
    
    <!-- EL T√çTULO PRINCIPAL -->
    <div class="header-content">
      <div class="header-title">
        <h1><i class="fas fa-home"></i> Inicio</h1>
      
      </div>
    </div>
    
    <!-- CONTENEDOR DE SESI√ìN DE USUARIO (MUESTRA EL ESTADO ACTUAL) -->
    <div id="userSessionContainer" class="user-session-container" style="display: none;">
      <div class="user-info">
        <span id="userNameDisplay">Usuario</span>
        <button class="psycho-button psycho-danger" id="logoutBtn">
          <i class="fas fa-sign-out-alt"></i> Cerrar Sesi√≥n
        </button>
      </div>
    </div>
    
    <!-- BOT√ìN INICIAR SESI√ìN (SOLO SI NO HAY USUARIO) -->
    <div id="loginContainer" class="login-btn-link">
      <a href="Inicio de secion.html">
        <button class="psycho-button">
          <i class="fas fa-sign-in-alt"></i> Iniciar Sesi√≥n
        </button>
      </a>
    </div>
  </header>

  <!-- Sistema de Pesta√±as -->
  <div class="tabs-container">
    <div class="tabs">
      <a href="principal.html">
        <button class="psycho-button active">
          <i class="fas fa-home"></i> Inicio
        </button>
      </a>
      <a href="Consultar.html">
        <button class="psycho-button psycho-warning">
          <i class="fas fa-search"></i> Consultar
        </button>
      </a>
      <a href="Menciones.html">
        <button class="psycho-button">
          <i class="fas fa-graduation-cap"></i> Menciones
        </button>
      </a>
      <a href="Contacto.html">
        <button class="psycho-button psycho-success">
          <i class="fas fa-envelope"></i> Contacto
        </button>
      </a>
    </div>
  </div>

  <!-- Contenido: INICIO -->
  
  <div id="inicio" class="tab-content active">
    <!-- Secci√≥n de Bienvenida Personalizada -->
    <section id="welcomeUserSection" class="welcome-user-section" style="display: none;">
      <div class="container">
        <h2 class="welcome-user-title" id="welcomeUserTitle">¬°Bienvenido!</h2>
        <p class="welcome-user-text" id="welcomeUserText">Has iniciado sesi√≥n correctamente en el sistema.</p>
        <div class="user-role-badge" id="userRoleBadge"></div>      </div>
    </section>

    <section class="welcome-section">
      <div class="container">
        <div class="welcome-container">
          <div class="welcome-content">
            <span class="welcome-badge">Excelencia Educativa</span>
            <h1 class="welcome-title">Bienvenido al Polit√©cnico</h1>
            <p class="welcome-text">Formaci√≥n t√©cnica de excelencia con m√∫ltiples metas especializadas. Nuestra instituci√≥n se dedica a preparar estudiantes para los desaf√≠os del mundo laboral actual, brindando las herramientas y conocimientos necesarios para el √©xito profesional.</p>
            <button class="psycho-button psycho-success" onclick="window.location.href='Consultar.html'">
              <i class="fas fa-search"></i> Consultar Estudiante
            </button>
          </div>
          
          <div class="features-grid">
            <div class="feature-card checked">
              <div class="feature-header">
                <div class="feature-icon">
                  <i class="fas fa-graduation-cap"></i>
                </div>
                <h3 class="feature-title">Programas Acad√©micos</h3>
              </div>
              <p class="feature-text">Programas acad√©micos actualizados y docentes altamente calificados.</p>
              <span class="feature-badge"><i class="fas fa-check"></i> Verificado</span>
            </div>
            
            <div class="feature-card">
              <div class="feature-header">
                <div class="feature-icon">
                  <i class="fas fa-laptop-code"></i>
                </div>
                <h3 class="feature-title">Tecnolog√≠a Avanzada</h3>
              </div>
              <p class="feature-text">Laboratorios equipados con la √∫ltima tecnolog√≠a para pr√°cticas especializadas.</p>
              <span class="feature-badge"><i class="fas fa-check"></i> Verificado</span>
            </div>
            
            <div class="feature-card checked">
              <div class="feature-header">
                <div class="feature-icon">
                  <i class="fas fa-briefcase"></i>
                </div>
                <h3 class="feature-title">Bolsa de Trabajo</h3>
              </div>
              <p class="feature-text">Convenios con empresas l√≠deres para pr√°cticas profesionales y empleo.</p>
              <span class="feature-badge"><i class="fas fa-check"></i> Verificado</span>
            </div>
            
            <div class="feature-card">
              <div class="feature-header">
                <div class="feature-icon">
                  <i class="fas fa-handshake"></i>
                </div>
                <h3 class="feature-title">Alianzas Estrat√©gicas</h3>
              </div>
              <p class="feature-text">Colaboraci√≥n con instituciones nacionales e internacionales de prestigio.</p>
              <span class="feature-badge"><i class="fas fa-check"></i> Verificado</span>
            </div>
          </div>
        </div>
      </div>
    </section>

    <section class="stats-section">
      <div class="container">
        <h2 class="section-title">Nuestros Logros</h2>
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-number">1,900+</div>
            <div class="stat-text">Estudiantes Activos</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-graduation-cap"></i>
            </div>
            <div class="stat-number">7</div>
            <div class="stat-text">Menciones Disponibles</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-chalkboard-teacher"></i>
            </div>
            <div class="stat-number">200+</div>
            <div class="stat-text">Docentes Calificados</div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon">
              <i class="fas fa-award"></i>
            </div>
            <div class="stat-number">90%</div>
            <div class="stat-text">Tasa de Empleabilidad</div>
          </div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n Misi√≥n, Visi√≥n, Valores -->
    <section class="institutional-section">
      <div class="container">
        <h2 class="section-title">Nuestra Instituci√≥n</h2>
        <div class="institutional-grid">
          <div class="institutional-card">
            <div class="institutional-icon">
              <i class="fas fa-bullseye"></i>
            </div>
            <h3 class="institutional-title">Misi√≥n</h3>
            <p class="institutional-text">Formar profesionales t√©cnicos competentes, √©ticos y emprendedores, mediante una educaci√≥n integral de calidad que responda a las demandas del sector productivo y contribuya al desarrollo sostenible de la sociedad.</p>
          </div>
          
          <div class="institutional-card">
            <div class="institutional-icon">
              <i class="fas fa-eye"></i>
            </div>
            <h3 class="institutional-title">Visi√≥n</h3>
            <p class="institutional-text">Ser reconocidos como la instituci√≥n l√≠der en educaci√≥n t√©cnica superior, innovadora y de excelencia, formando profesionales que transformen positivamente su entorno y sean agentes de cambio en el desarrollo nacional.</p>
          </div>
          
          <div class="institutional-card">
            <div class="institutional-icon">
              <i class="fas fa-heart"></i>
            </div>
            <h3 class="institutional-title">Valores</h3>
            <p class="institutional-text">Excelencia acad√©mica, Integridad √©tica, Responsabilidad social, Innovaci√≥n permanente, Respeto a la diversidad, Trabajo en equipo y Compromiso con el desarrollo sostenible.</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Secci√≥n Historia -->
    <section class="history-section">
      <div class="container">
        <h2 class="section-title">Nuestra Historia</h2>
        <div class="history-content">
          <div class="history-text">
            <p>El Polit√©cnico Nuevo Horizonte fue fundado en 1985 con el objetivo de brindar educaci√≥n t√©cnica de calidad a j√≥venes y adultos de la regi√≥n. Inicialmente comenz√≥ con tres programas t√©cnicos y una matr√≠cula de 120 estudiantes.</p>
            
            <p>A lo largo de m√°s de tres d√©cadas, nuestra instituci√≥n ha crecido significativamente, ampliando su oferta acad√©mica, infraestructura y alcance. Hoy contamos con 7 menciones t√©cnicas, m√°s de 1,900 estudiantes activos y una planta docente altamente calificada.</p>
            
            <p>En 2005, inauguramos nuestro moderno campus con laboratorios equipados con tecnolog√≠a de punta, lo que nos permiti√≥ ofrecer una educaci√≥n t√©cnica alineada con las demandas del mercado laboral.</p>
            
            <p>En el 2020, fuimos reconocidos como una de las instituciones t√©cnicas m√°s innovadoras del pa√≠s, gracias a nuestra implementaci√≥n de tecnolog√≠as educativas avanzadas y alianzas estrat√©gicas con el sector industrial.</p>
          </div>
          
          <div class="history-image">
            <img src="C:\Users\Romer Isaac\Downloads\escuela.jpg" alt="Historia del Polit√©cnico">
          </div>
        </div>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-column">
          <h3>Polin√©cnico Cardenal Sancha</h3>
          <p>Formando profesionales t√©cnicos desde 1985. Comprometidos con la excelencia educativa y el desarrollo de nuestra sociedad.</p>
          <div class="social-links">
            <a href="#"><i class="fab fa-facebook-f"></i></a>
            <a href="#"><i class="fab fa-twitter"></i></a>
            <a href="#"><i class="fab fa-instagram"></i></a>
            <a href="#"><i class="fab fa-linkedin-in"></i></a>
            <a href="#"><i class="fab fa-youtube"></i></a>
          </div>
        </div>
        
        <div class="footer-column">
          <h3>Enlaces R√°pidos</h3>
          <ul class="footer-links">
            <li><a href="principal.html"><i class="fas fa-chevron-right"></i> Inicio</a></li>
            <li><a href="Consultar.html"><i class="fas fa-chevron-right"></i> Consultar Estudiantes</a></li>
            <li><a href="Menciones.html"><i class="fas fa-chevron-right"></i> Menciones</a></li>
            <li><a href="Contacto.html"><i class="fas fa-chevron-right"></i> Contacto</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Programas Acad√©micos</h3>
          <ul class="footer-links">
            <li><a href="#"><i class="fas fa-chevron-right"></i> Inform√°tica</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Administraci√≥n</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Electr√≥nica</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Mec√°nica</a></li>
            <li><a href="#"><i class="fas fa-chevron-right"></i> Contabilidad</a></li>
          </ul>
        </div>
        
        <div class="footer-column">
          <h3>Contacto</h3>
          <div class="footer-contact">
            <p><i class="fas fa-map-marker-alt"></i> Av. Principal #123, Ciudad</p>
            <p><i class="fas fa-phone"></i> (123) 456-7890</p>
            <p><i class="fas fa-envelope"></i> info@politecnicocs.edu</p>
            <p><i class="fas fa-clock"></i> Lunes a Viernes: 8:00 AM - 5:00 PM</p>
          </div>
        </div>
      </div>
      
      <div class="footer-bottom">
        <p>&copy; 2023 Polit√©cnico Cardenal Sancha. Todos los derechos reservados.</p>
      </div>
    </div>
  </footer>

  <!-- Modal de Cookies -->
  <div class="cookie-modal" id="cookieModal">
    <div class="cookie-content">
      <div class="cookie-header">
        <div class="cookie-icon">
          <i class="fas fa-cookie-bite"></i>
        </div>
        <h2 class="cookie-title">Pol√≠tica de Cookies</h2>
      </div>
      
      <p class="cookie-text">
        Utilizamos cookies propias y de terceros para mejorar nuestros servicios, personalizar 
        contenido y analizar el tr√°fico de la web. Puedes aceptar todas las cookies pulsando 
        el bot√≥n "Aceptar" o configurarlas o rechazar su uso clicando en "Personalizar".
      </p>
      
      <div class="cookie-options">
        <div class="cookie-option">
          <input type="checkbox" id="essential" checked disabled>
          <label for="essential">Cookies esenciales</label>
          <p>Necesarias para el funcionamiento b√°sico del sitio. No se pueden desactivar.</p>
        </div>
        
        <div class="cookie-option">
          <input type="checkbox" id="analytics" checked>
          <label for="analytics">Cookies anal√≠ticas</label>
          <p>Nos permiten analizar el uso del sitio y mejorar la experiencia del usuario.</p>
        </div>
        
        <div class="cookie-option">
          <input type="checkbox" id="marketing">
          <label for="marketing">Cookies de marketing</label>
          <p>Utilizadas para rastrear visitantes a trav√©s de webs y mostrar anuncios relevantes.</p>
        </div>
      </div>
      
      <div class="cookie-buttons">
        <button class="cookie-btn cookie-btn-customize" id="customizeCookies">
          Personalizar
        </button>
        <button class="cookie-btn cookie-btn-accept" id="acceptCookies">
          Aceptar todas
        </button>
      </div>
    </div>
  </div>

  <script>
    // Configuraci√≥n de Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyA5cYiopxpIaUeF39k49k_FQokTnT4PRPo",
      authDomain: "politecnico-31102.firebaseapp.com",
      databaseURL: "https://politecnico-31102-default-rtdb.firebaseio.com",
      projectId: "politecnico-31102",
      storageBucket: "politecnico-31102.firebasestorage.app",
      messagingSenderId: "558895771748",
      appId: "1:558895771748:web:83cf0a5aa18792d54f2f71"
    };

    // Variables globales
    let auth, currentUser = null;

    // Funci√≥n para formatear nombres de roles
    function formatRoleName(role) {
      const roles = {
        'admin': 'Administrador',
        'docente': 'Docente', 
        'estudiante': 'Estudiante',
        'invitado': 'Invitado'
      };
      return roles[role] || role;
    }

    // ============================================
    // FUNCI√ìN PARA MOSTRAR/OCULTAR ELEMENTOS SEG√öN SESI√ìN
    // ============================================
    function updateUIForUser(userData) {
      const userSessionContainer = document.getElementById('userSessionContainer');
      const loginContainer = document.getElementById('loginContainer');
      const welcomeSection = document.getElementById('welcomeUserSection');
      const welcomeTitle = document.getElementById('welcomeUserTitle');
      const welcomeText = document.getElementById('welcomeUserText');
      const userRoleBadge = document.getElementById('userRoleBadge');
      const userNameDisplay = document.getElementById('userNameDisplay');
      
      if (userData) {
        // HAY USUARIO LOGUEADO - MOSTRAR "CERRAR SESI√ìN"
        userSessionContainer.style.display = 'flex';
        loginContainer.style.display = 'none';
        welcomeSection.style.display = 'block';
        
        // Mostrar informaci√≥n del usuario
        const roleName = formatRoleName(userData.role);
        welcomeTitle.textContent = `¬°Bienvenido, ${userData.fullName || userData.username || userData.email}!`;
        welcomeText.textContent = `Has iniciado sesi√≥n como ${roleName}`;
    
        userNameDisplay.textContent = userData.fullName || userData.username || userData.email;
        
        console.log('‚úÖ Usuario logueado detectado:', userData.email);
      } else {
        // NO HAY USUARIO LOGUEADO - MOSTRAR "INICIAR SESI√ìN"
        userSessionContainer.style.display = 'none';
        loginContainer.style.display = 'block';
        welcomeSection.style.display = 'none';
        
        console.log('üë§ No hay usuario logueado - Mostrando bot√≥n de inicio de sesi√≥n');
      }
    }

    // ============================================
    // FUNCI√ìN DE LOGOUT CON CONFIRMACI√ìN
    // ============================================
    async function logoutUser() {
      try {
        const confirmLogout = confirm("¬øEst√°s seguro de que deseas cerrar sesi√≥n?");
        if (!confirmLogout) return;

        // Cerrar sesi√≥n en Firebase
        await auth.signOut();

        // Limpiar localStorage
        localStorage.removeItem('currentUser');
        localStorage.removeItem('userPermissions');
        localStorage.removeItem('lastLogin');

        // Actualizar UI inmediatamente
        updateUIForUser(null);

        console.log('‚úÖ Sesi√≥n cerrada correctamente');

        // Recargar la p√°gina para actualizar estado
        setTimeout(() => {
          window.location.reload();
        }, 300);

      } catch (error) {
        console.error('‚ùå Error al cerrar sesi√≥n:', error);
        alert('Error al cerrar sesi√≥n: ' + error.message);
      }
    }

    // ============================================
    // FUNCI√ìN PARA VERIFICAR ESTADO DE AUTENTICACI√ìN
    // ============================================
    function checkAuthState() {
      auth.onAuthStateChanged(async (user) => {
        if (user) {
          console.log('üîÑ Usuario autenticado en Firebase:', user.email);
          
          // Obtener datos del usuario desde la base de datos
          try {
            const database = firebase.database();
            const userRef = database.ref(`users/${user.uid}`);
            const snapshot = await userRef.once('value');
            
            if (snapshot.exists()) {
              const userData = snapshot.val();
              userData.uid = user.uid;
              userData.email = user.email;
              
              // Guardar en localStorage
              localStorage.setItem('currentUser', JSON.stringify(userData));
              
              // Actualizar UI
              updateUIForUser(userData);
              
              console.log('üìã Datos del usuario cargados desde Firebase:', userData.fullName);
            } else {
              console.log('‚ö†Ô∏è Usuario no encontrado en base de datos');
              updateUIForUser(null);
            }
          } catch (error) {
            console.error('‚ùå Error obteniendo datos del usuario:', error);
            updateUIForUser(null);
          }
        } else {
          console.log('üë§ No hay usuario autenticado en Firebase');
          
          // Limpiar localStorage si no hay usuario
          localStorage.removeItem('currentUser');
          updateUIForUser(null);
        }
      });
    }

    // ============================================
    // INICIALIZACI√ìN
    // ============================================
    document.addEventListener('DOMContentLoaded', function() {
      try {
        // Inicializar Firebase
        firebase.initializeApp(firebaseConfig);
        auth = firebase.auth();
        
        console.log('‚úÖ Firebase inicializado en principal.html');
        
        // Configurar bot√≥n de cerrar sesi√≥n
        document.getElementById('logoutBtn').addEventListener('click', logoutUser);
        
        // Verificar si hay datos en localStorage inmediatamente
        const savedUser = localStorage.getItem('currentUser');
        if (savedUser) {
          try {
            const userData = JSON.parse(savedUser);
            updateUIForUser(userData);
          } catch (e) {
            console.error('Error parsing saved user:', e);
            updateUIForUser(null);
          }
        } else {
          updateUIForUser(null);
        }
        
        // Verificar estado de Firebase
        checkAuthState();
        
        // Configurar listener para cambios en el estado de autenticaci√≥n
        auth.onAuthStateChanged((user) => {
          console.log('üîÑ Estado de autenticaci√≥n cambiado:', user ? 'Usuario conectado' : 'Usuario desconectado');
          checkAuthState();
        });
        
        // Mostrar modal de cookies si no se han aceptado antes
        const cookiesAccepted = localStorage.getItem('cookiesAccepted');
        if (!cookiesAccepted) {
          setTimeout(function() {
            document.getElementById('cookieModal').classList.add('active');
          }, 1000);
        }
        
        // Configurar botones de cookies
        document.getElementById('acceptCookies').addEventListener('click', function() {
          localStorage.setItem('cookiesAccepted', 'true');
          document.getElementById('cookieModal').classList.remove('active');
        });
        
        document.getElementById('customizeCookies').addEventListener('click', function() {
          const analytics = document.getElementById('analytics').checked;
          const marketing = document.getElementById('marketing').checked;
          
          localStorage.setItem('cookiesAccepted', 'true');
          localStorage.setItem('analyticsCookies', analytics);
          localStorage.setItem('marketingCookies', marketing);
          
          document.getElementById('cookieModal').classList.remove('active');
          alert('Preferencias de cookies guardadas');
        });
        
      } catch (error) {
        console.error('‚ùå Error inicializando Firebase:', error);
        // A√∫n mostrar la UI b√°sica
        updateUIForUser(null);
      }
    });
  </script>

</body>
</html>